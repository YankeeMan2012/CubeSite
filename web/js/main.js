window.onload=function(){AppJS.ready()};var AppJS={ready:function(){AppJS.handlers(),AppJS.sliderInit(),AppJS.deviceDetect(),AppJS.calculateSum(),$(".customScroll").mCustomScrollbar({scrollInertia:200,theme:"dark",scrollbarPosition:"outside"})},handlers:function(){$(".choiceMethod .methodItem").on("click",function(){AppJS.callMethod($(this))}),$(".showCallBack").on("click",function(){AppJS.switchCallBack()}),$(".callBackForm button").on("click",function(e){AppJS.ajaxSubmit(e,$(this))}),$(".gibBtn, .up").on("click",function(){AppJS.rotateSite()}),$(".changeControl").on("click",function(e){AppJS.changeControl(e,$(this))}),$(".status").on("click",function(){AppJS.changeItem($(this)),AppJS.calculateSum()}),$(".changeItem button").on("click",function(){AppJS.changeBtn($(this)),AppJS.calculateSum()}),$(".openPf").on("click",function(){AppJS.pfShow()}),$(".pfClose").on("click",function(){AppJS.pfHide()}),$(".overlay").on("click",function(){AppJS.hideModal()}),$(".calculate, .pubInput, .logoField").on("keypress",function(e){AppJS.onlyPattern(e,$(this))}),$(".calculate, .pubInput, .logoField").on("input",function(){AppJS.calculateSum()}),$(".duplicate").on("input",function(){AppJS.duplicate($(this))}),$(".pubInput, .logoField").on("input",function(){AppJS.copyToDuplicate($(this))}),$("#select").on("change",function(){AppJS.calculateSum()}),window.onresize=function(){AppJS.deviceDetect()}},onlyPattern:function(e,a){var t=a.val()+String.fromCharCode(e.charCode),s=/^[0-9]*$/.test(t);(!s||t.length>5)&&e.preventDefault()},hideModal:function(){$(".show, .pfShow").removeClass("show pfShow")},ajaxSubmit:function(e,a){e.preventDefault();var t=a.closest("form").serializeArray(),s=$(".preLoader");s.show(),$.post("/mail.php",t,function(){AppJS.switchCallBack(),s.hide()})},sliderInit:function(){var e=Math.round($(".pfSlide").length/2)-1,a=new Swiper(".pfSlider",{slidesPerView:"auto",centeredSlides:!0,spaceBetween:-180,nextButton:".swiper-next",prevButton:".swiper-prev",initialSlide:e,breakpoints:{400:{spaceBetween:-50},650:{spaceBetween:-120}}});AppJS.sliderLevel(),a.on("SlideChangeStart",function(){AppJS.sliderLevel()})},sliderLevel:function(){$(".pfSlide").removeClass("level3 level4 level5");var e=$(".swiper-slide-next").next(),a=$(".swiper-slide-prev").prev(),t=e.next(),s=a.prev(),n=t.next(),i=s.prev();e.add(a).addClass("level3"),t.add(s).addClass("level4"),n.add(i).addClass("level5")},changeBtn:function(e){var a=e.closest(".changeItem").find(".status"),t=e.closest(".question"),s=a.closest(".questionBox"),n=t.hasClass("onlinePay");e.hasClass("ok")?(n&&t.removeClass("noPay").addClass("pay"),e.closest(".design").find(".active").removeClass("active")):e.hasClass("no")&&n&&t.removeClass("pay").addClass("noPay"),s.removeClass("showQuestion"),setTimeout(function(){s.addClass("showQuestion")},10)},callMethod:function(e){var a=e.attr("data-target"),t=e.closest(".choiceMethod").find(".methodItem"),s=e.closest(".callBack").find("form");t.removeClass("active"),e.addClass("active"),s.attr("id","method"+(e.closest(".methodWrap").index()+1)),s.find("input").removeAttr("name").removeClass("submitField"),s.find("."+a).attr("name",a).addClass("submitField")},changeControl:function(e,a){$(e.target).closest(".question").length||($(".designType").removeClass("checked active"),a.addClass("checked active"),AppJS.calculateSum())},changeItem:function(e){var a=e.closest(".changeItem");a.find(".onlinePay").removeClass("pay noPay"),e.toggleClass("checked noChecked"),a.hasClass("questionBox")&&a.toggleClass("showQuestion")},switchCallBack:function(){$(".callBack").toggleClass("show")},rotateSite:function(){$(".wrapper").toggleClass("rotate")},pfShow:function(){$(".portfolio").addClass("pfShow")},pfHide:function(){$(".portfolio").removeClass("pfShow")},copyToDuplicate:function(e){var a=e.val(),t=$("."+e.attr("data-duplicate"));t.val(a)},duplicate:function(e){var a=e.val(),t=$("."+e.attr("data-real"));t.val(a)},calculateSum:function(){var e=$(".price span"),a=$(".deadline span"),t=0,s=0,n=$(".adaptive");if(n.hasClass("checked")){var i=n.attr("data-key");s+=params[i].time,t+=params[i].price}var o=$("#select").val();s+=params.engine[o].time,t+=params.engine[o].price;var l=$(".calculate");l.each(function(){var e=$(this).closest(".changeItem"),a=e.find(".status"),n=e.find(".individual");if(a.hasClass("checked")||$(this).hasClass("pageNum")&&n.hasClass("checked")){var i=e.attr("data-key"),o=+$(this).val();s+=params[i].time*o,t+=params[i].price*o}});var c=$(".pubInput"),p=c.closest(".publication"),r=p.attr("data-key"),d=p.find(".publicNum").val(),u=p.find(".words").val();if(p.find(".status").hasClass("checked")){var h=+d*(+u/1e3);s+=params[r].time*h,t+=params[r].price*h}var f=$(".logoField"),v=f.closest(".logotype"),m=v.attr("data-key"),S=+v.find(".devLogo").val();v.find(".status").hasClass("checked")&&(s+=params[m].time*S,t+=params[m].price*S);var C=$(".status.checked:not(.noCalculate)");C.each(function(){var e=$(this).attr("data-key");s+=params[e].time,t+=params[e].price});var g=$(".onlinePay.pay");if(g.length){var k=g.attr("data-key");s+=params[k].time,t+=params[k].price}isNaN(t)||e.text(Math.round(t)+" руб."),isNaN(s)||a.text(Math.round(s)+" дней.")},deviceDetect:function(){var e=detect.parse(navigator.userAgent),a=e.device.family,t=e.os.family;AppJS.isBadBrowser="iPhone"===a||"iPad"===a||"iOS"===t,AppJS.appleStyle()},appleStyle:function(){var e=$("body"),a=$(".cube, .side");if(AppJS.isBadBrowser){var t=window.innerHeight;e.addClass("apple"),a.css({height:t})}else e.removeClass("apple"),a.css({height:"100vh"})}};